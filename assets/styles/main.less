// ================
// = Dependancies =
// ================

@import (less) 'normalize.css';
@import 'order.less';
@import 'clutter.less';


// ========================================
// = Shared variables, styles, and mixins =
// ========================================

@color-project-bg: #d8d8d8;
@color-project-text: #444;

// @color-personal-bg: darken(@color-project-bg, 7.5%);
@color-personal-bg: @color-project-bg;
@color-personal-text: @color-project-text;


// =======================
// = Typography / Layout =
// =======================

@light-font-family: 'Helvetica Neue', sans-serif;
@light-font-variation: 300;
@light-font-offset: 0.877;

@normal-font-family: 'Gill Sans', Calibri, Trebuchet, sans-serif;
@normal-font-variation: 400;
@normal-font-offset: 0.844;

@italic-font-family: 'Gill Sans', Calibri, Trebuchet, sans-serif;
@italic-font-variation: italic 400;
@italic-font-offset: 0.840;

@bold-font-family: 'Gill Sans', Calibri, Trebuchet, sans-serif;
@bold-font-variation: 600;
@bold-font-offset: 0.846;

@bolder-font-family: 'Helvetica Neue', sans-serif;
@bolder-font-variation: 700;
@bolder-font-offset: 0.879;

.use-baseline-grid(16px, 1.3, normal);

html {
	.font-baseline();
	background: @color-project-bg;
	color: @color-project-text;
	
	@media screen and (min-width: 1280px) {
		font-size: 18px;
	}
}

/*
	Headings
*/
h2 {
	.font-align(36px, 1.4, bolder);
	.margin-top(1);
	.margin-bottom(1);
}
h3 {
	.font-align(24px, 1.4, bolder);
	.margin-top(1);
	.margin-bottom(0);
}

/*
	Figures
*/
img {
	max-width: 100%;
	height: auto;
}

figure {
	background: #f6f6f6;
	margin: 0;
	
	// OS X + Browser chrome for site screenshots
	&.chrome {
		overflow: hidden;
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4), 0 5px 10px rgba(0, 0, 0, 0.2);
		border-radius: 3px;
		padding-top: 11px;
		background: #fff url(/assets/graphics/chrome.png) no-repeat 0 -11px;
		background-size: 2048px 22px;
		
		img {
			max-width: none;
			width: 100%;
		}
		
		figcaption {
			position: relative;
			padding: 4px 5px 4px;
			border-bottom: 1px solid #d1d1d1;
			background: #fff;
			color: #666;
			
			.font(8px, 1, normal);
			
			&:before {
				content: 'http://';
				color: #aaa;
			}
			&:after {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				display: block;
				border: 3px solid #f6f6f6;
				content: '';
			}
		}
	}
}

/*
	Links
*/
a {
	color: inherit;
}


/*
	Misc
*/
p {
	margin: 0;
	.margin-bottom(1);
}

.w {
	.invisible();
}

// ==========
// = Layout =
// ==========

.use-column-grid(1024px, 30px, 3);

html {
	height: 100%;
}
body {
	height: 100%;
}

/*
	Landing page
*/
@sidebar-width: unit((300px / @baseline-size), em);

body {
	position: relative;
	padding-left: @sidebar-width;
	
	&:before {
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		z-index: -1;
		width: @sidebar-width;
		display: block;
		background: @color-personal-bg;
		content: '';
	}
}
#profile {
	float: left;
	.border-box();
	width: @sidebar-width;
	padding: 0 (@grid-gutter / 3 * 2);
	.padding-top(1);
	margin-left: (@sidebar-width * -1);
	background: @color-personal-bg;
	color: @color-personal-text;
	
	&.fixed {
		position: fixed;
	}
}
#projects {
	float: right;
	.border-box();
	padding: @grid-gutter;
	.padding-top(1);
	.padding-bottom(1);
	background: @color-project-bg;
	color: @color-project-text;
}

@media screen and (max-width: 1023px) {
	body {
		padding-left: 0;
	}
	
	#profile {
		float: none;
		width: auto;
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
		
		&.fixed {
			position: static;
		}
		
		> p {
			float: left;
			.width(1.5);
			.margin-bottom(1.5);
			
			+ p {
				float: right;
			}
		}
		
		footer {
			clear: both;
		}
	}
}

@media screen and (max-width: 600px) {
	#projects {
		padding-left: (@grid-gutter / 3 * 2);
		padding-right: (@grid-gutter / 3 * 2);
	}
	#profile > p {
		&, + p {
			float: none;
			width: auto;
			.margin-bottom(1);
		}
	}
}


// ==============
// = Components =
// ==============

/*
	Profile
*/
@image-width: 150px;

#profile {
	// .show-baselines();
	
	header, footer > ul {
		text-align: center;
	}
	
	// Photo
	header > a {
		position: relative;
		overflow: hidden;
		display: block;
		width: @image-width;
		max-width: 100%;
		margin: 0 auto;
		.margin-top(1);
		border-radius: 50%;
		box-shadow: -1px 1px 1px rgba(255,255,255,0.4);
		background: #333;
		
		&:before {
			display: block;
			padding-top: 100%;
			content: '';
		}
		
		&:after {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			display: block;
			border-radius: 50%;
			box-shadow: inset -1px 2px 1px 0px rgba(0,0,0,0.6);
			content: '';
		}
		
		img {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			max-width: none;
		}
	}
	
	
	h1, h2 {
		display: inline;
		margin: 0;
	}
	.p-name, .p-role, .p-adr {
		display: block;
	}
	
	// Name
	.p-name {
		color: darken(@color-personal-text, 20%);
		.font-align(31px, 1.25, bold);
		.margin-top(1.5);
		.margin-bottom(0.125);
	}
	
	// Role 
	.p-role {
		color: darken(@color-personal-text, 20%);
		display: block;
		text-transform: uppercase;
		.font-align(13px, 1.45, bolder);
		.margin-bottom(0.125);
	}
	
	// Locations
	.p-adr {
		.margin-top(0.125);
		.font-align(16px, 1.30, italic);
		.margin-bottom(1);
	}
	
	// Text
	p {
		// .font-align(14px, 1.25, normal);
	}
	
	// Links
	footer h2 {
		.invisible();
	}
	footer > ul {
		.reset-list();
		.margin-top(1.5);
		
		li {
			display: inline-block;
			margin: 0 2px;
		}
		a {
			display: block;
			.image-replaced();
			width: 28px;
			height: 28px;
			border-radius: 50%;
			background: darken(@color-personal-bg, 60%) url(/assets/graphics/icons-social.png) no-repeat 0 0;
			
			&:hover, &:focus {
				background-color: darken(@color-personal-bg, 45%);
			}
			
			@media (min-resolution: 192dpi) {
				background-image: url(/assets/graphics/icons-social@2x.png);
				background-size: 112px 28px;
			}
			
			&[href^='//twitter.com'] {
				background-position: (-28px * 1) 0;
			}
			&[href^='//youtube.com'] {
				background-position: (-28px * 2) 0;
			}
			&[href^='//soundcloud.com'] {
				background-position: (-28px * 3) 0;
			}
		}
	}
}

/*
	Projects
*/
#projects {
	h2 {
		.invisible();
		color: darken(@color-project-bg, 40%);
		.font-align(20px, 1.5, bolder);
		text-align: center;
		text-shadow: 0 -1px 0 rgba(0,0,0,0.7),  0 1px 0 rgba(255,255,255,0.65);
		text-transform: uppercase;
	}
	
	* + h2 {
		.margin-top(1);
	}
	
	h3 {
		.invisible();
	}
	
	a {
		color: inherit;
		text-decoration: none;
	}
	
	ul {
		.reset-list();
		.margin-top(1);
		.margin-bottom(1);
	}
	
	li {
		position: relative;
		display: inline-block;
		.width(1);
		.margin-left(@grid-gutter);
		.margin-bottom(1);
		vertical-align: top;
		
		&:first-child {
			.margin-left(0);
		}
	}
	
	figure {
		max-height: 100%;
	}
	
	@size-arrow: (@grid-gutter / 4);
	@color-shadow: fade(darken(#fff, 40%), 85%);
	@color-background: fade(#f6f6f6, 90%);
	@color-hover-bg: fade(#444, 85%);
	@color-hover-text: #eee;
	
	p {
		padding: (@grid-gutter / 2);
		.padding-top(0.5);
		.padding-bottom(0.5);
		box-shadow: -2px 2px 1px fade(#000, 10%);
		background: @color-background;
		.font(14px,  1.3, normal);
		text-shadow: -2px 2px 2px fade(#333, 12.5%);
		
		transition: background-color 80ms ease-out;
		transition-property: background-color, text-shadow;
		
		&:before {
			transition: border-color 80ms ease-out;
		}
	}
	
	a:hover, a:focus {
		p {
			box-shadow: -2px 2px 2px fade(#000, 25%);
			background: @color-hover-bg;
			color: @color-hover-text;
		}
	}
	
	.client {
		.clearfix();
		
		li {
			display: block;
			float: right;
			.width(1.25);
			.height(13);
			.margin-bottom(2);
		}
		
		li:first-child {
			float: left;
			.width(1.75);
			.height(28);
		}
		
		@media screen and (max-width: (724px)) {
			li {
				.width(1.5);
				.height(18);
			}
			li:first-child {
				float: none;
				.width(3);
				.height(22);
				
				+ li {
					float: left;
					.margin-left(0);
				}
			}
		}
		
		@media screen and (max-width: (600px)) {
			li {
				width: auto;
				margin-left: 0;
				.height(21);
			}
		}
		
		p {
			position: absolute;
			.bottom(0.75);
			.right((@size-arrow * -1));
			z-index: 5;
			width: 14em;
			margin: 0;
		
			small {
				display: block;
				.margin-top(0.25);
				.margin-bottom(0.25);
				.font-align(10px, 1.4, bolder);
				text-transform: uppercase;
				text-align: right;
			}
		
			&:before {
				position: absolute;
				top: 100%;
				right: 0;
				z-index: -1;
				display: block;
				border-left: @size-arrow solid @color-shadow;
				border-bottom: @size-arrow solid transparent;
				content: '';
			}
		}
		
		a:hover, a:focus {
			figure.chrome {
				background-position: 0 0;
				
				figcaption:after {
					border-color: #eee;
				}
			}
			
			p {
				&:before {
					border-left-color: fade(darken(#444, 15%), 85%);
				}
			}
		}
	}
	
	.personal {
		
		img {
			display: block;
			margin: 0 auto;
			.margin-top(0.5);
			.margin-bottom(1);
			max-height: 50%;
		}
		
		p {
			position: relative;
			max-width: (20em);
			margin-left: auto;
			margin-right: auto;
			margin-bottom: 0;
			box-shadow: 0px 1px 1px 1px fade(#000, 10%);
			text-shadow: 0px 2px 1px fade(#333, 7.5%);
			
			&:before {
				@size-arrow: (@grid-gutter / 3 * 1);
				position: absolute;
				top: (@size-arrow * -1);
				left: 50%;
				display: block;
				margin-left: (@size-arrow / -1);
				border-left: @size-arrow solid transparent;
				border-right: @size-arrow solid transparent;
				border-bottom: @size-arrow solid @color-background;
				content: '';
			}
			
			&:after {
				display: block;
				.padding-top(0.25);
				.padding-bottom(0.25);
				.font-align(10px, 1.4, bolder);
				text-transform: uppercase;
				text-align: center;
				content: 'View on GitHub \2192';
			}
		}
		
		a:hover, a:focus {
			p:before {
				border-bottom-color: @color-hover-bg;
			}
		}
		
		@media screen and (max-width: (724px)) {
			li {
				display: block;
				width: auto;
				margin-left: auto;
				margin-right: auto;
				.margin-bottom(2);
			}
		}
	}
}