// ================
// = Dependancies =
// ================

@import (less) 'normalize.css';
@import 'order.less';
@import 'clutter.less';


// ========================================
// = Shared variables, styles, and mixins =
// ========================================

@color-project-bg: #d8d8d8;
@color-project-text: #444;

@color-personal-bg: @color-project-bg;
@color-personal-text: @color-project-text;


// =======================
// = Typography / Layout =
// =======================

@light-font-family: 'Helvetica Neue', sans-serif;
@light-font-variation: 300;
@light-font-offset: 0.877;

@normal-font-family: 'Helvetica Neue', sans-serif;
@normal-font-variation: 400;
@normal-font-offset: 0.870;

@bold-font-family: 'Helvetica Neue', sans-serif;
@bold-font-variation: 500;
@bold-font-offset: 0.879;

@bolder-font-family: 'Helvetica Neue', sans-serif;
@bolder-font-variation: 700;
@bolder-font-offset: 0.879;

.use-baseline-grid(15px, 1.4, normal);

html {
	.font-baseline();
	background: @color-project-bg;
	color: @color-project-text;
}

/*
	Headings
*/
h2 {
	.font-align(36px, 1.4, bolder);
	.margin-top(1);
	.margin-bottom(1);
}
h3 {
	.font-align(24px, 1.4, bolder);
	.margin-top(1);
	.margin-bottom(0);
}

/*
	Figures
*/
img {
	max-width: 100%;
	height: auto;
}

figure {
	background: #f6f6f6;
	margin: 0;
	
	// OS X + Browser chrome for site screenshots
	&.chrome {
		overflow: hidden;
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.4), 0 5px 10px rgba(0, 0, 0, 0.2);
		border-radius: 3px;
		padding-top: 11px;
		background: url(/assets/graphics/chrome.png) no-repeat 0 -11px;
		background-size: 2048px 22px;
		
		img {
			max-width: none;
			width: 100%;
		}
		
		figcaption {
			position: relative;
			padding: 4px 5px 4px;
			border-bottom: 1px solid #d1d1d1;
			background: #fff;
			color: #666;
			
			.font(8px, 1, normal);
			
			&:before {
				content: 'http://';
				color: #aaa;
			}
			&:after {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				display: block;
				border: 3px solid #f6f6f6;
				content: '';
			}
		}
	}
}

/*
	Links
*/
a {
	color: inherit;
}


/*
	Misc
*/
p {
	margin: 0;
	.margin-bottom(1);
}

.w {
	.invisible();
}

// ==========
// = Layout =
// ==========

.use-column-grid(1024px, 30px, 3);

html {
	height: 100%;
}
body {
	min-height: 100%;
}

/*
	Landing page
*/
@sidebar-width: unit((300px / @baseline-size), em);

body {
	position: relative;
	padding-left: @sidebar-width;
	
	&:before {
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		z-index: -1;
		width: @sidebar-width;
		display: block;
		background: @color-personal-bg;
		content: '';
	}
}
main.profile {
	float: left;
	.border-box();
	width: @sidebar-width;
	padding: 0 (@grid-gutter);
	.padding-top(1);
	margin-left: (@sidebar-width * -1);
	background: @color-personal-bg;
	color: @color-personal-text;
}
aside.projects {
	float: right;
	.border-box();
	padding: @grid-gutter;
	.padding-top(1);
	.padding-bottom(1);
	background: @color-project-bg;
	color: @color-project-text;
}


// ==============
// = Components =
// ==============

/*
	Profile
*/
@image-width: 150px;

main.profile {
	// .show-baselines();
	
	header, footer > ul {
		text-align: center;
	}
	
	// Photo
	header > a {
		position: relative;
		overflow: hidden;
		display: block;
		width: @image-width;
		max-width: 100%;
		margin: 0 auto;
		.margin-top(2);
		border-radius: 50%;
		
		&:before {
			display: block;
			padding-top: 100%;
			content: '';
		}
		
		img {
			position: absolute;
			top: 0;
			left: 0;
			width: 105%;
			max-width: none;
		}
	}
	
	
	h1, h2 {
		display: inline;
		margin: 0;
	}
	.p-name, .p-role, .p-adr {
		display: block;
	}
	
	// Name
	.p-name {
		.font-align(32px, 1, bold);
		.margin-top(1.5);
		.margin-bottom(0);
	}
	
	// Role 
	.p-role {
		display: block;
		text-transform: uppercase;
		.font-align(14px, 1.4, bolder);
	}
	
	// Locations
	.p-adr {
		.font-align(15px, 1.4, normal);
		.margin-bottom(1);
	}
	
	// Text
	p {
		.font-align(14px, 1.25, normal);
	}
	
	// Links
	footer h2 {
		.invisible();
	}
	footer > ul {
		.reset-list();
		.margin-top(1.5);
		
		li {
			display: inline-block;
			margin: 0 2px;
		}
		a {
			display: block;
			.image-replaced();
			width: 28px;
			height: 28px;
			border-radius: 50%;
			background: darken(@color-personal-bg, 50%) url(/assets/graphics/icons-social.png) no-repeat 0 0;
			
			&:hover, &:focus {
				background-color: darken(@color-personal-bg, 40%);
			}
			
			@media (min-resolution: 192dpi) {
				background-image: url(/assets/graphics/icons-social@2x.png);
				background-size: 112px 28px;
			}
			
			&[href^='//twitter.com'] {
				background-position: (-28px * 1) 0;
			}
			&[href^='//youtube.com'] {
				background-position: (-28px * 2) 0;
			}
			&[href^='//soundcloud.com'] {
				background-position: (-28px * 3) 0;
			}
		}
	}
}

/*
	Projects
*/
.projects {
	h2 {
		.invisible();
		color: darken(@color-project-bg, 20%);
		.font-align(20px, 1.5, bolder);
		text-align: center;
		text-shadow: 0 -1px 0 rgba(0,0,0,0.7),  0 1px 0 rgba(255,255,255,0.65);
		text-transform: uppercase;
	}
	
	* + h2 {
		.margin-top(2);
	}
	
	h3 {
		.invisible();
	}
	
	a {
		color: inherit;
		text-decoration: none;
	}
	
	ul {
		.reset-list();
		.margin-bottom(1);
	}
	
	li {
		position: relative;
		display: inline-block;
		.width(1);
		.margin-left(@grid-gutter);
		.margin-bottom(1);
		vertical-align: top;
		
		&:first-child {
			.margin-left(0);
		}
	}
	
	figure {
		max-height: 100%;
	}
	
	.client {
		.clearfix();
		
		li {
			display: block;
			float: right;
			.width(1.25);
			.height(12);
			.margin-bottom(2);
		}
		
		li:first-child {
			float: left;
			.width(1.75);
			.height(26);
		}
		
		p {
			@size-arrow: (@grid-gutter / 4);
			@color-shadow: fade(darken(#fff, 40%), 85%);
			@color-background: fade(#f6f6f6, 85%);
			
			position: absolute;
			.bottom(0.75);
			.right((@size-arrow * -1));
			z-index: 5;
			width: 200px;
			margin: 0;
			padding: (@grid-gutter / 2);
			.padding-top(0.5);
			.padding-bottom(0.5);
			box-shadow: -2px 2px 1px fade(#000, 10%);
			background: @color-background;
			.font(14px, 1.4, normal);
			
			small {
				display: block;
				.margin-top(0.25);
				.margin-bottom(0.25);
				.font-align(10px, 1.4, bolder);
				text-transform: uppercase;
				text-align: right;
			}
			
			&:after {
				position: absolute;
				top: 100%;
				right: 0;
				z-index: -1;
				display: block;
				// height: 100%;
				// background: @color;
				border-left: @size-arrow solid @color-shadow;
				border-bottom: @size-arrow solid transparent;
				content: '';
			}
		}
		
		a:hover, a:focus {
			figure.chrome {
				background-position: 0 0;
				
				figcaption:after {
					border-color: #eee;
				}
			}
			
			p {
				background: fade(#444, 85%);
				color: #eee;
				
				&:after {
					border-left-color: fade(darken(#444, 15%), 85%);
				}
			}
		}
	}
	
	.personal {
		text-align: center;
		
		img {
			display: block;
			margin: 0 auto;
			.margin-top(0.5);
			.margin-bottom(1);
			max-height: 50%;
		}
		
		p {
			max-width: (20em);
			margin-left: auto;
			margin-right: auto;
			.font-align(15px, 1.4, normal);
		}
	}
}